<!DOCTYPE html>
<html>

<head>
    <title>设置</title>
    <%- include('./head') %>
    <link rel="stylesheet" href="/stylesheets/navbar.css" />
    <link rel="stylesheet" href="/stylesheets/settings.css" />
    <script src="/javascripts/checkLogin.js"></script>
    <script src="/javascripts/settings.js"></script>
</head>

<body>
    <main>
        <%- include('./menu') %>
        <h1>账号设置</h1>
        <div class="upload-container">
            <label for="avatar-upload">
              <img id="avatar-preview" src="https://raw.githubusercontent.com/winkyneverlose/static-resources/main/img/default_avatar.png" alt="Avatar">
              <p>点击上传头像</p>
            </label>
            <input type="file" id="avatar-upload" class="upload-input" accept="image/*">
        </div>
        <form id="personal-settings-form" class="settings-form">
            <div class="form-group">
                <label for="username">用户名</label>
                <input type="text" id="username" name="username" required>
            </div>
            <div class="form-group">
                <label for="email">邮箱</label>
                <input type="email" id="email" name="email" required>
            </div>
        </form>
        <button id="save-personal-settings" class="btn">保存</button>

        <hr>

        <h1>密码设置</h1>
        <form id="password-settings-form" class="settings-form">
            <div class="form-group">
                <label for="new-password">新密码</label>
                <input type="password" id="new-password" name="new-password" required> 
            </div>
            <div class="form-group">
                <label for="confirm-password">确认密码</label>
                <input type="password" id="confirm-password" name="confirm-password" required>
            </div>
        </form>
        <button id="save-password-settings" class="btn">保存</button>

        <hr>

        <h1>资料设置</h1>
        <form id="profile-settings-form" class="settings-form">
            <div class="form-group">
                <label for="nickname">昵称</label>
                <input type="text" id="nickname" name="nickname" maxlength="25" required>
            </div>
            <div class="form-group">
                <label for="first-name">名</label>
                <input type="text" id="first-name" name="first-name" maxlength="25" required>
            </div>
            <div class="form-group">
                <label for="last-name">姓</label>
                <input type="text" id="last-name" name="last-name" maxlength="15" required>
            </div>
            <div class="form-group">
                <label for="gender">性别</label>
                <div>
                    <label for=male>男</label>
                    <input type="checkbox" id="male" name="male">
                    <hr style="transform: rotate(90deg); width: 40px; display: inline-grid;">
                    <label for=female>女</label>
                    <input type="checkbox" id="female" name="female">
                </div>
                <script>
                    document.getElementById("male").addEventListener('change', () => {
                        if(document.getElementById("male").checked) {
                            document.getElementById("female").checked = false;
                        }
                    });
                    document.getElementById("female").addEventListener('change', () => {
                        if(document.getElementById("female").checked) {
                            document.getElementById("male").checked = false;
                        }
                    });
                </script>
            </div>
            <div class="form-group">
                <label for="birthday">生日</label>
                <input type="date" id="birthday" name="birthday">
            </div>
            <div class="form-group">
                <label for="bio">个人简介</label>
                <textarea id="bio" name="bio" maxlength="300"></textarea>
            </div>
            <div class="form-group">
                <label for="educated">教育程度</label>
                <input type="text" id="educated" name="educated" maxlength="20">
            </div>
            <div class="form-group">
                <label for="language">语言</label>
                <input type="text" id="language" name="language" maxlength="29">
            </div>
            <div class="form-group">
                <label for="customize-url1">自定义链接1</label>
                <input type="url" id="customize-url1" name="customize-url1" maxlength="99">
            </div>
            <div class="form-group">
                <label for="customize-url2">自定义链接2</label>
                <input type="url" id="customize-url2" name="customize-url2" maxlength="99">
            </div>
            <div class="form-group">
                <label for="customize-url3">自定义链接3</label>
                <input type="url" id="customize-url3" name="customize-url3" maxlength="99">
            </div>
            <div class="form-group">
                <label for="customize-url4">自定义链接4</label>
                <input type="url" id="customize-url4" name="customize-url4" maxlength="99">
            </div>
        </form>
        <button id="save-profile-settings" class="btn">保存</button>

        <hr>

        <h1>兴趣♂设置</h1>
        <form id="tags-settings-form" class="settings-form">
            <div class="form-group" id="tags">
                <label for="tags">XP1</label>
                <input type="checkbox" id="xp-1">
                <label for="tags">XP2</label>
                <input type="checkbox" id="xp-2">
                <label for="tags">XP3</label>
                <input type="checkbox" id="xp-3">
                <label for="tags">XP4</label>
                <input type="checkbox" id="xp-4">
            </div>
        </form>
        <button id="save-tags-settings" class="btn">保存</button>
        <script>
            const tags = document.getElementById('tags');
            const tagList = tags.getElementsByTagName('input');
            let tagArray = [];
            document.addEventListener('DOMContentLoaded', function () {
        
                function updateTagArray() {
                    tagArray = [];
                    for (let i = 0; i < tagList.length; i++) {
                        if (tagList[i].checked) {
                            tagArray.push(tagList[i].id);
                        }
                    }
                }
        
                function handleChange(event) {
                    updateTagArray();
                    console.log(tagArray);
                }
        
                updateTagArray();
        
                tags.addEventListener('change', handleChange);
            });
        </script>
        
        <hr>

        <h1>退出登录</h1>
        <button id="logout" class="btn" style="background-color: red;">退出登录</button>

        <br>
        <br>
    </main>
</body>

</html>